<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Medical Devices Directory</title>

  <!-- DataTables CSS -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.min.css">

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

  <!-- DataTables JS -->
  <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      margin: 0;
      padding: 0;
    }

    header {
      background: #0b5ed7;
      color: white;
      padding: 16px;
      text-align: center;
      font-size: 22px;
      font-weight: bold;
    }

    .container {
      padding: 20px;
    }

    .tabs {
      margin-bottom: 15px;
    }

    .tabs button {
      background: #dee2e6;
      border: none;
      padding: 10px 16px;
      margin-right: 8px;
      cursor: pointer;
      font-size: 14px;
      border-radius: 4px;
    }

    .tabs button.active {
      background: #0b5ed7;
      color: white;
    }

    .table-box {
      display: none;
    }

    .table-box.active {
      display: block;
    }

    table.dataTable thead th {
      background: #e9ecef;
      white-space: nowrap;
    }

    table.dataTable tbody td {
      white-space: normal;
      line-height: 1.4em;
    }
  </style>
</head>

<body>

<header>
  Medical Devices â€“ Manufacturers & Importers
</header>

<div class="container">

  <div class="tabs">
    <button id="btn-manufacturer" class="active" onclick="showManufacturer()">Manufacturers</button>
    <button id="btn-importer" onclick="showImporter()">Importers</button>
  </div>

  <!-- Manufacturer Table -->
  <div id="manufacturerBox" class="table-box active">
    <table id="manufacturerTable" class="display" style="width:100%"></table>
  </div>

  <!-- Importer Table -->
  <div id="importerBox" class="table-box">
    <table id="importerTable" class="display" style="width:100%"></table>
  </div>

</div>

<script>
/* ---------------- MANUFACTURERS ---------------- */
async function loadManufacturers() {
  const res = await fetch("data/products.json");
  const data = await res.json();

  $('#manufacturerTable').DataTable({
    destroy: true,
    pageLength: 25,
    data: data,
    columns: [
      { data: null, title: "S No", render: (d,t,r,m) => m.row + 1 },
      { data: "Manufacturer Name and address", title: "Manufacturer" },
      { data: "License Number", title: "License Number" },
      { data: "Name of Device and Device Class", title: "Device & Class" },
      { data: "Issuing Authority", title: "Issuing Authority" }
    ]
  });
}

/* ---------------- IMPORTERS ---------------- */
async function loadImporters() {
  const files = [
    "data/products_part1.json",
    "data/products_part2.json",
    "data/products_part3.json"
  ];

  let allData = [];

  for (const file of files) {
    const res = await fetch(file);
    const json = await res.json();
    allData = allData.concat(json);
  }

  $('#importerTable').DataTable({
    destroy: true,
    pageLength: 25,
    data: allData,
    columns: [
      { data: null, title: "S No", render: (d,t,r,m) => m.row + 1 },
      { data: "Importer Name and address", title: "Importer" },
      { data: "License Number", title: "License Number" },
      { data: "Name of Device and Device Class", title: "Device & Class" },
      { data: "Intended Use", title: "Intended Use" },
      { data: "Issuing Authority", title: "Issuing Authority" }
    ]
  });
}

/* ---------------- TAB SWITCHING ---------------- */
function showManufacturer() {
  document.getElementById("manufacturerBox").classList.add("active");
  document.getElementById("importerBox").classList.remove("active");
  document.getElementById("btn-manufacturer").classList.add("active");
  document.getElementById("btn-importer").classList.remove("active");

  $.fn.dataTable.tables({ visible: true, api: true }).columns.adjust();
}

function showImporter() {
  document.getElementById("manufacturerBox").classList.remove("active");
  document.getElementById("importerBox").classList.add("active");
  document.getElementById("btn-manufacturer").classList.remove("active");
  document.getElementById("btn-importer").classList.add("active");

  if (!$.fn.DataTable.isDataTable('#importerTable')) {
    loadImporters();
  }

  $.fn.dataTable.tables({ visible: true, api: true }).columns.adjust();
}

/* ---------------- INIT ---------------- */
document.addEventListener("DOMContentLoaded", function () {
  loadManufacturers(); // load by default
});
</script>

</body>
</html>




